package controllers;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.List;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;

import models.*;

import service.ReimbursementServiceImpl;
import service.UserServiceImpl;

public class ReimbursementController  {

	
	public static void allUserReim(HttpServletRequest req, HttpServletResponse res)
			throws IOException, JsonProcessingException {
		
		HttpSession sess = req.getSession();
		
		System.out.println(sess.getAttribute("user"));
		UserServiceImpl myUserServ = new UserServiceImpl();
		List<Reimbursement> userReim = myUserServ.viewUserRequests((User)sess.getAttribute("user"));
		
		PrintWriter printer = res.getWriter();
		printer.write(new ObjectMapper().writeValueAsString(userReim));
	}
	
//	public static void allNameFinder(HttpServletRequest req, HttpServletResponse res)
//			throws IOException, JsonProcessingException {
//		
//		/*
//		 * THIS IS WHERE YOU'D GO TO THE DATABASE TO GET THE OBJECTS TO SEND TO THE CLIENT
//		 */
//
//		SuperVillainService myServ = new SuperVillainServiceImpl();
//		SuperVillain myVill = myServ.getVillainByName(new SuperVillain());
//		
//		/*
//		 * in your project 1 you MAY already have the user's information in their session...no
//		 * need to go to the database in that case
//		 * You can just extract the reimbursments doing a
//		 * HttpSession session = req.getSession();
//		 * session.getAttribute(".....
//		 */
//		
//		PrintWriter printer = res.getWriter();
//		printer.write(new ObjectMapper().writeValueAsString(myVill));
//	}
}
